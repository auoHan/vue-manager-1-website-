(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5db6a399"],{a15b:function(e,t,n){"use strict";var r=n("23e7"),a=n("44ad"),o=n("fc6a"),i=n("a640"),s=[].join,c=a!=Object,l=i("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},a4fa:function(e,t,n){"use strict";var r=n("b775"),a="/admin/acl/permission";t["a"]={getPermissionList:function(){return Object(r["a"])({url:"".concat(a),method:"get"})},removePermission:function(e){return Object(r["a"])({url:"".concat(a,"/remove/").concat(e),method:"delete"})},addPermission:function(e){return Object(r["a"])({url:"".concat(a,"/save"),method:"post",data:e})},updatePermission:function(e){return Object(r["a"])({url:"".concat(a,"/update"),method:"put",data:e})},toAssign:function(e){return Object(r["a"])({url:"".concat(a,"/toAssign/").concat(e),method:"get"})},doAssign:function(e,t){return Object(r["a"])({url:"".concat(a,"/doAssign"),method:"post",params:{roleId:e,permissionId:t}})}}},b5ab:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{attrs:{disabled:"",value:e.$route.query.roleName}}),n("el-tree",{ref:"tree",staticStyle:{margin:"20px 0"},attrs:{data:e.allPermissions,"node-key":"id","show-checkbox":"","default-expand-all":"",props:e.defaultProps}}),n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")]),n("el-button",{on:{click:function(t){return e.$router.replace({name:"Role"})}}},[e._v("取消")])],1)},a=[],o=(n("d3b7"),n("a15b"),n("ac1f"),n("5319"),n("caad"),n("2532"),n("a4fa")),i={name:"RoleAuth",data:function(){return{loading:!1,allPermissions:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.params.id;this.getPermissions(e)},getPermissions:function(e){var t=this;o["a"].toAssign(e).then((function(e){var n=e.data.children;t.allPermissions=n;var r=t.getCheckedIds(n);t.$refs.tree.setCheckedKeys(r)}))},getCheckedIds:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,r){return r.select&&4===r.level?e.push(r.id):r.children&&t.getCheckedIds(r.children,n),e}),n)},save:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");this.loading=!0,o["a"].doAssign(this.$route.params.id,t).then((function(t){e.loading=!1,e.$message.success(t.$message||"分配权限成功");var n=e.$route.query.roleName,r=e.$store.getters.roles;e.$router.replace("/acl/role/list",(function(){console.log("replace onComplete"),r.includes(n)&&window.location.reload()}))}))}}},s=i,c=n("2877"),l=Object(c["a"])(s,r,a,!1,null,null,null);t["default"]=l.exports}}]);